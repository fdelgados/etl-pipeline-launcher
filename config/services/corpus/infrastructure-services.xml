<?xml version="1.0" encoding="utf-8" standalone="no"?>

<services>
    <service id="corpus.build.infrastructure.persistence.sqlalchemy.build_repository.build_repository_impl"
             class="corpus.build.infrastructure.persistence.sqlalchemy.build_repository.BuildRepositoryImpl">
        <argument name="dsn" value="database_dsn" args="corpus" type="settings" />
    </service>

    <service id="corpus.build.infrastructure.persistence.mongodb.page_repository.mongo_db_page_repository"
             class="corpus.build.infrastructure.persistence.mongodb.page_repository.MongoDbPageRepository">
        <argument name="database" value="web_corpus" type="parameter" />
    </service>

    <service id="corpus.build.infrastructure.content.beautiful_soup.page_retriever.page_retriever_impl"
             class="corpus.build.infrastructure.content.beautiful_soup.page_retriever.PageRetrieverImpl">
        <argument name="cache" value="shared.domain.service.caching.cache.cache" type="service" />
    </service>

    <service id="corpus.build.infrastructure.content.beautiful_soup.url_source.url_source_impl"
             class="corpus.build.infrastructure.content.beautiful_soup.url_source.UrlSourceImpl" />

    <service id="corpus.build.infrastructure.persistence.sqlalchemy.corpus_repository.corpus_repository_impl"
             class="corpus.build.infrastructure.persistence.sqlalchemy.corpus_repository.CorpusRepositoryImpl" />

    <service id="corpus.infrastructure.persistence.sqlalchemy.dbal.sql_alchemy_dbal_service"
             class="shared.infrastructure.persistence.sqlalchemy.dbal.SqlAlchemyDbalService">
        <argument name="context" value="corpus" type="parameter" />
    </service>

    <service id="corpus.infrastructure.event.mysql.eventstore.mysql_event_store"
             class="shared.infrastructure.event.mysql.eventstore.MysqlEventStore">
        <argument name="db_service" value="corpus.infrastructure.persistence.sqlalchemy.dbal.sql_alchemy_dbal_service" type="service" />
    </service>

    <service id="corpus.build.infrastructure.requests_counter.sqlalchemy.requests_counter.requests_counter_impl"
             class="corpus.build.infrastructure.requests_counter.sqlalchemy.requests_counter.RequestsCounterImpl">
        <argument name="db_service" value="corpus.infrastructure.persistence.sqlalchemy.dbal.sql_alchemy_dbal_service" type="service" />
    </service>

    <service id="corpus.build.infrastructure.corpus_manager.mongodb.corpus_manager.corpus_manager_impl"
             class="corpus.build.infrastructure.corpus_manager.mongodb.corpus_manager.CorpusManagerImpl">
        <argument name="database" value="web_corpus" type="parameter" />
    </service>
</services>
