<?xml version="1.0" encoding="utf-8" standalone="no"?>

<services>
    <service id="duplicates.report.application.reportservice.report_creator_command_handler"
             class="duplicates.report.application.reportservice.ReportCreatorCommandHandler">
        <argument name="logger" value="shared.domain.service.logging.logger.logger" type="service"/>
        <argument name="report_repository" value="duplicates.report.domain.model.report.report_repository" type="service"/>
        <argument name="event_bus" value="shared.domain.bus.event.event_bus" type="service"/>
    </service>

    <service id="duplicates.data.application.transformer.wrangle_data_on_report_created"
             class="duplicates.data.application.wrangler.WrangleDataOnReportCreated">
        <argument name="data_gatherer" value="duplicates.data.domain.service.datagatherer.data_gatherer" type="service" />
        <argument name="data_transformer" value="duplicates.data.domain.service.datatransformer.data_transformer" type="service" />
        <argument name="transformed_page_content_repository" value="duplicates.data.domain.model.transformedpagecontent.transformed_page_content_repository" type="service" />
        <argument name="report_repository" value="duplicates.report.domain.model.report.report_repository" type="service"/>
        <argument name="event_bus" value="shared.domain.bus.event.event_bus" type="service" />
    </service>

    <service id="duplicates.report.application.reportservice.next_identity_query_handler"
             class="duplicates.report.application.reportservice.NextIdentityQueryHandler">
        <argument name="report_repository" value="duplicates.report.domain.model.report.report_repository" type="service"/>
    </service>

    <service id="duplicates.similarity.application.similarity.calculate_similarities_on_data_loaded"
             class="duplicates.similarity.application.similarity.CalculateSimilaritiesOnDataLoaded">
        <argument name="similarity_calculator" value="duplicates.similarity.application.similarity.similarity_calculator_service" type="service"/>
    </service>

    <service id="duplicates.similarity.application.similarity.similarity_calculator_service"
             class="duplicates.similarity.application.similarity.SimilarityCalculatorService">
        <argument name="report_repository" value="duplicates.report.domain.model.report.report_repository" type="service"/>
        <argument name="minhash_generator" value="duplicates.similarity.domain.service.minhashgenerator.min_hash_generator" type="service" />
        <argument name="minhash_repository" value="duplicates.similarity.domain.model.minhash.min_hash_repository" type="service" />
        <argument name="page_repository" value="duplicates.data.domain.model.transformedpagecontent.transformed_page_content_repository" type="service" />
        <argument name="duplicate_repository" value="duplicates.similarity.domain.model.duplicate.duplicate_repository" type="service" />
        <argument name="event_bus" value="shared.domain.bus.event.event_bus" type="service"/>
    </service>

    <service id="duplicates.report.application.reportupdater.update_report_on_data_loaded"
             class="duplicates.report.application.reportupdater.UpdateReportOnDataLoaded">
        <argument name="report_repository" value="duplicates.report.domain.model.report.report_repository" type="service"/>
        <argument name="transformed_page_content_repository" value="duplicates.data.domain.model.transformedpagecontent.transformed_page_content_repository" type="service" />
    </service>
</services>
